---
layout: page
title: "OSCP/PWK Course Review and Resources"
description: "Are you interested in pursuing the OSCP certification but don't know how to prepare or what to expect? Look no further..."
---

<a href="http://spitfy.re//wp-content/uploads/2017/07/offsensive-security-logo-kg-1.png"><img class="wp-image-84 size-thumbnail alignright" src="http://spitfy.re//wp-content/uploads/2017/07/offsensive-security-logo-kg-1-150x150.png" alt="" width="150" height="150" /></a>

The OSCP certification by Offensive Security is consistently reviewed by students as one of the most rewarding certification experiences in information security. I received my certification on June 29th. I spent nearly six months completing the Penetration Testing with Kali Linux (PWK) course book and compromising machines in the lab environment. By the time the exam started, I had fully compromised 35 machines in the lab environment and completed every exercise in the course book.<!--more-->

I took the exam first on May 21st, but did not reach the minimum required 70/100 points. After compromising about 15 more lab machines in the following month, I retook the exam and passed. I am glad that I had to retake the exam. The gaps in my knowledge became much more apparent after the first attempt, which I then focused on filling during the next month. I knew which machines to focus on (e.g. Pain, Gamma) to refine certain skills such as privilege escalation and web exploitation. I also repeated machines I compromised previously, but this time without using Metasploit.

For those thinking about taking the exam, I highly recommend it. The resources available (Custom Kali VM, PWK book, lab environment) combined with the web forums ensures that students master the penetration test process. The hands-on exam forces you to be comfortable learning on-the-go and adapting current techniques to new information. And when you get stuck, there is nothing to do besides <strong>try harder</strong> (the motto of OffSec).

In the rest of this post, I will provide some tips and tools that helped me be successful on the exam. I believe that everything I learned during the entire experience will be very beneficial in my future as a security researcher.

<h3 style="text-align: center;">The PWK Course Guide</h3>

The course guide is where everyone should start. Each chapter is oriented around a specific topic such as information gathering, client side attacks, and password attacks. You will definitely need to understand each and every chapters' material in order to pass the exam.<a href="https://www.offensive-security.com/documentation/penetration-testing-with-kali.pdf"> The course syllabus can be accessed for free here</a>. Each section concludes with exercises that are meant to reinforce the material that you just read. While helpful for those unfamiliar with certain tools prior to the course, the exercises are insufficient in preparing for the exam. You must also spend many hours in the lab environment, which I will get to in a bit.

<a href="http://spitfy.re//wp-content/uploads/2017/07/pwk-box-large.png"><img class="alignleft wp-image-105 size-medium" src="http://spitfy.re//wp-content/uploads/2017/07/pwk-box-large-205x300.png" alt="" width="205" height="300" /></a>

In my opinion, the <strong>Buffer Overflow </strong>and <strong>Web Attacks</strong> chapters are the two best chapters of the PWK course book. The sections and exercises are more thorough than most of the other chapters. The information provided in those chapters is also very important both for the exam and in modern security research. If you head to a site like <a href="https://www.hackerone.com/">HackerOne</a> or the <a href="https://www.twitter.com/cvenew">CVENew Twitter feed</a>, you can view vulnerabilities currently being discovered and disclosed. Many of the current vulnerabilities fall under vulnerabilities in memory management (buffer overflows, for example) or web application input sanitization. Thus, for any modern security research or pentester, deep technical knowledge in these two fields is very important.

<h3 style="text-align: center;">The Lab Environment</h3>

The lab environment is the best part of the entire OSCP certification experience. The lab is meant to be as realistic as possible in order to simulate a real-world environment running vulnerable services or insecure system configurations. However, do not expect any sort of new, cutting-edge Windows 10 exploits. Offensive Security tests each system to make sure the vulnerable service can be successfully compromised through publicly available exploits, which means the exploits are at least a few years old and well-documented. Exploits are usually found on ExploitDB or through the Metasploit Framework.

That being said, not all machines have a single attack vector. The best way to study is to become comfortable attacking a vulnerable system in multiple different ways. For example, a machine might have SMB, NetBIOS, SMTP, POP3, and HTTP services running. If you are able to successfully compromised the web application on the first attempt, then you should follow up by fully enumerating the mail-related services for vulnerabilities. In the real world, pentesters are expected to <b>fully </b>enumerate the target and find any and all vulnerable attack vectors. It also forces you to broaden how you gather information so that you waste less time going down rabbit holes during the exam (like I did the first time...).

<h3 style="text-align: center;">The Exam</h3>

The OSCP exam is a grueling, but rewarding, 24-hour exam that is meant to simulate a real-world penetration test. You are graded on how many machines you compromise along with the quality of your pentest report. OffSec provides an <a href="https://www.offensive-security.com/pwk-online/PWKv1-REPORT.doc">example template</a> to use during the exam, and I used it in my report. Given the points distribution and minimum points required, you must gain access to at least 4 out of 5 machines to pass.

The exam machines are very similar to the lab machines. The level of difficulty is higher than the average lab machine, but not by much. If you compromise most of the difficult machines in the lab, you will most likely do fine. If I had to choose three machines that prepared me best, it would be the Alpha Beta Gamma series of machines.

<h3 style="text-align: center;">Useful Resources</h3>

<h5>Complete Guide to Alpha</h5>

One of the lesser known but highly beneficial resources provided by OffSec in the private forums is the Complete Guide to Alpha. This guide walks through the Alpha machine from initial information gathering to post-exploitation. After completing the PWK course material, I felt lost when it came to the actual pentest process. Going through the Complete Guide to Alpha step-by-step and reading the commentary provided an excellent initial example of how to attack each lab machine.

Beyond the forums, which provide great dialogue about each lab machine without any spoilers (they are censored out by OffSec staff), there are many other great resources to use when going through the lab. In no particular order, here are the most useful resources I found that helped me compromise 35 lab machines and pass the exam:

<ul>
    <li><strong><a href="http://www.fuzzysecurity.com/tutorials/16.html">FuzzySecurity Windows Privilege Escalation Fundamentals</a></strong> - This blog post provides a lot of different ways to enumerate the machine once you have a low-privilege shell. I would argue that Windows privilege escalation is one of the most difficult components of the lab and exam. This post does a great job of outlining some ways to look for exploitable gaps in the security of a Windows machine once you obtain a low-privilege shell.</li>
    <li><a href="https://www.offensive-security.com/metasploit-unleashed/"><strong>Metasploit Unleashed</strong></a> - Metasploit Unleashed is a free online hacking course provided by Offensive Security. The purpose of the course is to provide an in-depth Metasploit guide for penetration testing. During all phases of the certification process, you will use Metasploit to generate payloads, launch exploits, and handle incoming reverse shell payloads. While Metasploit usage is limited during the exam to a single machine, it is good to use Metasploit in the beginning of the lab to gain confidence and knock out the easy machines. Some useful sections in the Metasploit Unleashed course are about <a href="https://www.offensive-security.com/metasploit-unleashed/using-exploits/">how to use exploits</a>, <a href="https://www.offensive-security.com/metasploit-unleashed/msfvenom/">how to use MSFvenom to generate payloads</a>, the <a href="https://www.offensive-security.com/metasploit-unleashed/psexec-pass-hash/">PSExec Pass the Hash attack</a>, and the <a href="https://www.offensive-security.com/metasploit-unleashed/portfwd/">Portfwd command</a> once you gain access to other subnets within the lab.</li>
    <li><a href="https://technet.microsoft.com/en-us/sysinternals/accesschk.aspx"><strong>AccessChk</strong></a> - This is a fantastic tool to use for Windows privilege escalation. AccessChk is part of Windows Sysinternals and is designed to aid system administrators with securing their environment. It shows what kind of access certain users or groups have to resources on the machine such as files, registry keys, and services. Finding a world-writeable service that runs as System is one way that this tool can be used to escalate your privileges on a Windows machine.</li>
    <li><a href="http://eelsivart.blogspot.com/2011/06/going-from-sql-injection-to-reverse.html"><strong>Going from SQL Injection to Reverse Shell Walkthrough</strong></a> - One of the most common web vulnerabilities is SQL injection. During the OSCP process, you will most likely run into a machine with this type of vulnerability. So once you identify this vulnerability, how do you use it to gain remote access? This blog post by eelsivart shows you how to get a reverse shell via SQL injection. By writing the base64-encoded contents of a Meterpreter payload to a file using the INTO OUTFILE SQL command, you can then upload another php file in the same way that executes the payload.</li>
    <li><a href="http://www.lanmaster53.com/2011/05/7-linux-shells-using-built-in-tools/"><strong>7 Linux Shells Using Built-in Tools</strong></a> - Let's assume you have compromised a Linux machine as a low-privilege user, and you did so through some sort of web exploit that gave you a reverse PHP shell. You can execute commands for a couple minutes, but then the shell crashes. Why? Well, in general, PHP reverse shells are not very stable. Something you will get in the habit of doing is immediately pivoting from a PHP shell to a standard Linux shell via netcat or some other means. In this blog post, lanmaster53 shows you seven different ways to get a seperate, standard shell, even if certain files or programs are not present or have restricted permissions.</li>
    <li><a href="http://pentestmonkey.net/cheat-sheet/shells/reverse-shell-cheat-sheet"><strong>Reverse Shell Cheat Sheet</strong> </a>- If I had to pick the resource I visited most frequently during my OSCP experience, it would be this one. Pentestmonkey put together an amazing list of commands in over seven languages that give you a reverse shell. My personal favorite is the Bash reverse shell for Linux machines.</li>
    <li><a href="https://blog.g0tmi1k.com/2011/08/basic-linux-privilege-escalation/"><strong>Basic Linux Privilege Escalation</strong></a> - This blog post by g0tmilk is referenced in the Complete Guide to Alpha. Use it well and often for all your Linux privesc needs.</li>
    <li><a href="https://pentest.blog/windows-privilege-escalation-methods-for-pentesters/"><strong>Windows Privilege Escalation for Pentesters</strong></a> - Last, but certainly not least, is this Windows privesc blog post by Pentest Blog. I used this a lot during the OSCP process because my Windows-fu is not very good. This guide provides a lot of "script-kiddie" commands to use to check and see if there are security gaps in various Windows services and processes.</li>
</ul>

Well, that pretty much covers everything I wanted to talk about. If you are currently in the OSCP certification process, I wish you the best of luck. Remember to try harder! If you have not yet started but are thinking about doing so, I hope this post gave you a good idea of what you are about to get yourself into :D .
